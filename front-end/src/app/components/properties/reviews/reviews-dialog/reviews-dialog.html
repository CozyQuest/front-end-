<!-- Full-screen overlay with blur -->
<div
  class="fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-md transition-opacity duration-300"
  (click)="closeDialog()"
>
  <!-- Modal -->
  <div
    class="w-full max-w-3xl max-h-[75vh] mx-auto rounded-3xl p-6 space-y-6 overflow-hidden flex flex-col animate-zoomIn shadow-[0_8px_40px_rgba(0,0,0,0.2)]"
    (click)="$event.stopPropagation()"
    style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); border: 1px solid rgba(147, 197, 253, 0.3);"
  >
    <!-- Close Button -->
    <div class="flex justify-end">
      <button
        (click)="closeDialog()"
        class="text-gray-600 hover:text-black text-2xl font-bold transition duration-150"
      >
        &times;
      </button>
    </div>

    <!-- Title -->
    <h2 class="text-2xl font-bold text-center text-gray-900">
      {{ filteredReviews.length }} Review{{ filteredReviews.length !== 1 ? 's' : '' }}
    </h2>

    <!-- Search Bar -->
    <div class="relative">
      <input
        [(ngModel)]="searchText"
        type="text"
        placeholder="Search by name or review..."
        class="w-full px-5 py-3 text-sm rounded-xl border border-blue-300 placeholder-gray-500 text-gray-700 bg-white/70 backdrop-blur-md focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all"
      />
      <i class="mdi mdi-magnify absolute right-4 top-3 text-gray-400"></i>
    </div>

    <!-- Reviews List -->
    <div class="overflow-y-auto flex-1 space-y-6 custom-scrollbar pr-4">
      <div
        *ngFor="let review of filteredReviews;  let i = index"
        class="border border-blue-100 bg-white/80 rounded-xl p-4 space-y-3 transition-all duration-300 hover:shadow-md"
      >
        <!-- Reviewer Info -->
        <div class="flex items-center gap-4" (click)="goToPublicProfile(review.userId)">
          <img
            [src]="review.userProfilePicUrl || defaultAvatar "
            alt="{{ review.userFullName }}"
            class="w-12 h-12 rounded-full object-cover border border-blue-200 cursor-pointer hover:ring-2 ring-blue-500"
          />
          <div>
            <p class="font-semibold text-gray-900">{{ review.userFullName }}</p>
            <p class="text-sm text-gray-600">{{ reviewLocations[i] }}</p>
          </div>
        </div>

        <!-- Rating & Date -->
        <div class="flex items-center text-sm text-gray-700 gap-2">
          <span class="text-yellow-400 text-lg">
            <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
              {{ star <= review.rate ? '★' : '☆' }}
            </ng-container>
          </span>
          <span class="text-gray-500">· {{ review.createdAt | date: 'MMMM y' }}</span>
        </div>


        <!-- Review Text -->
       <p class="text-sm text-gray-800">
          {{ review.reviewText }}
        </p>
      </div>
    </div>
  </div>
</div>
